<?xml version="1.0" encoding="UTF-8"?>
<process name="RollbackActivityTest" display-name="Rollback activity test" item-type="Process" type="TopLevel" skin-name="uml" node-geometry="size:320:120"><description>Test case for rollback behavior within the activity.</description><generator-info><![CDATA[
<generator-settings generator-name="ProcessTopLevel"/>
]]></generator-info><activity-node name="AssertProcessVariableValue" display-name="TestVar should be 50"><geometry>origin:224:870|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="ExpectedValue" display-name="Expected value" type="Object"><expression>50</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;TestVar&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.AssertProcessVariableValueActivity"/></activity-node><activity-node name="AssertProcessVariableValue2" display-name="TestVar should be 70"><geometry>origin:224:1485|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="ExpectedValue" display-name="Expected value" type="Object"><expression>70</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;TestVar&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.AssertProcessVariableValueActivity"/></activity-node><activity-node name="AssertProcessVariableValue4" display-name="Force Assert"><geometry>origin:224:2206|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="ExpectedValue" display-name="Expected value" type="Object"><expression>2</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;Counter&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.AssertProcessVariableValueActivity"/></activity-node><decision-node name="Decision" expression="_Counter == 1"><geometry>origin:224:1846|size:60|nameangle:3.141592653589793</geometry><socket name="In" entry="true" default="true"><geometry>angle:4.71238898038469</geometry></socket><socket name="No"><geometry>angle:1.5707963267948966</geometry></socket><socket name="Yes" default="true"><geometry>angle:0.0</geometry></socket></decision-node><decision-node name="Decision2" expression="_Counter == 2"><geometry>origin:224:1991|size:60|nameangle:3.141592653589793</geometry><socket name="In" entry="true" default="true"><geometry>angle:4.71238898038469</geometry></socket><socket name="No"><geometry>angle:1.5707963267948966</geometry></socket><socket name="Yes" default="true"><geometry>angle:0.0</geometry></socket></decision-node><merge-node name="Merge"><geometry>origin:1362:1849|size:35|nameangle:1.5707963267948966</geometry><socket name="In1" entry="true"><geometry>angle:3.141592653589793</geometry></socket><socket name="Out" default="true"><geometry>angle:0.0</geometry></socket></merge-node><final-node name="NeverReached" display-name="Never reached"><geometry>origin:1546:1849|size:35</geometry><socket name="In" entry="true" default="true"><geometry>angle:3.141592653589793</geometry></socket></final-node><final-node name="Out2"><geometry>origin:224:2332|size:35</geometry><socket name="In" entry="true" default="true"><geometry>angle:4.71238898038469</geometry></socket></final-node><activity-node name="PerformRollback Restore Variables" display-name="Perform rollback  restore  variables"><geometry>origin:226:681|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="RollbackDataBehavior" display-name="Rollback data behavior" type="String"><description>Possible values:\n&quot;UpdateVariables&quot;: Update process variables\n&quot;AddVariables&quot;: Add new variables|add-variables\n&quot;RestoreVariables&quot;: Restore process variables</description><expression>&quot;RestoreVariables&quot;</expression></param><param name="RollbackPositionBehavior" display-name="Rollback position behavior" type="String"><description>Possible values:\nMaintainPosition: Maintain current position\nRestorePosition: Restore current position</description><expression>&quot;MaintainPosition&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.PerformRollbackActivity"/></activity-node><activity-node name="PerformRollback Update Variables" display-name="Perform rollback  update  variables"><geometry>origin:223:1288|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="RollbackDataBehavior" display-name="Rollback data behavior" type="String"><description>Possible values:\n&quot;UpdateVariables&quot;: Update process variables\n&quot;AddVariables&quot;: Add new variables|add-variables\n&quot;RestoreVariables&quot;: Restore process variables</description><expression>&quot;UpdateVariables&quot;</expression></param><param name="RollbackPositionBehavior" display-name="Rollback position behavior" type="String"><description>Possible values:\nMaintainPosition: Maintain current position\nRestorePosition: Restore current position</description><expression>&quot;MaintainPosition&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.PerformRollbackActivity"/></activity-node><activity-node name="PerformRollback Update Variables2" display-name="Perform rollback  update  variables"><geometry>origin:1148:1847|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="RollbackDataBehavior" display-name="Rollback data behavior" type="String"><description>Possible values:\n&quot;UpdateVariables&quot;: Update process variables\n&quot;AddVariables&quot;: Add new variables|add-variables\n&quot;RestoreVariables&quot;: Restore process variables</description><expression>&quot;UpdateVariables&quot;</expression></param><param name="RollbackPositionBehavior" display-name="Rollback position behavior" type="String"><description>Possible values:\nMaintainPosition: Maintain current position\nRestorePosition: Restore current position</description><expression>&quot;RestorePosition&quot;</expression></param><geometry>angle:3.141592653589793</geometry></socket><socket name="Out" default="true"><geometry>angle:6.283185307179586</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.PerformRollbackActivity"/></activity-node><activity-node name="SetProcessVariableValue" display-name="Set TestVar to 50"><geometry>origin:227:256|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="NewValue" display-name="New value" type="Object"><expression>50</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;TestVar&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.SetProcessVariableValueActivity"/></activity-node><activity-node name="SetProcessVariableValue2" display-name="Set TestVar to 60"><geometry>origin:227:476|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="NewValue" display-name="New value" type="Object"><expression>60</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;TestVar&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.SetProcessVariableValueActivity"/></activity-node><activity-node name="SetProcessVariableValue3" display-name="Set TestVar to 70"><geometry>origin:224:1088|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="NewValue" display-name="New value" type="Object"><expression>70</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;TestVar&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.SetProcessVariableValueActivity"/></activity-node><activity-node name="SetProcessVariableValue4" display-name="Set Counter to 1"><geometry>origin:224:1695|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="NewValue" display-name="New value" type="Object"><expression>1</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;Counter&quot;</expression></param><geometry>angle:4.71238898038469</geometry></socket><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.SetProcessVariableValueActivity"/></activity-node><activity-node name="SetProcessVariableValue5" display-name="Set TestVar to 80"><geometry>origin:511:1846|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="NewValue" display-name="New value" type="Object"><expression>80</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;TestVar&quot;</expression></param><geometry>angle:3.141592653589793</geometry></socket><socket name="Out" default="true"><geometry>angle:0.0</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.SetProcessVariableValueActivity"/></activity-node><activity-node name="SetProcessVariableValue6" display-name="Set Counter to 2"><geometry>origin:840:1846|size:160:60</geometry><socket name="In" entry="true" default="true"><param name="NewValue" display-name="New value" type="Object"><expression>2</expression></param><param name="VariableName" display-name="Variable name" type="String"><expression>&quot;Counter&quot;</expression></param><geometry>angle:3.141592653589793</geometry></socket><socket name="Out" default="true"><geometry>angle:0.0</geometry></socket><activity-handler handler-class="org.openbp.server.test.activity.SetProcessVariableValueActivity"/></activity-node><initial-node name="Start"><geometry>origin:227:86|size:35</geometry><socket name="Out" default="true"><geometry>angle:1.5707963267948966</geometry></socket></initial-node><final-node name="TestCaseEnd" display-name="Test case end"><geometry>origin:452:1991|size:35</geometry><socket name="In" entry="true" default="true"><geometry>angle:3.141592653589793</geometry></socket></final-node><control-link name="ControlLink" source="Start.Out" target="SetProcessVariableValue.In"><geometry>points:1:227:126:227:142:227:163:227:179|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink10" source="Decision2.No" target="AssertProcessVariableValue4.In"><geometry>points:1:224:2045:224:2070:224:2104:224:2129|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink11" source="AssertProcessVariableValue4.Out" target="Out2.In"><geometry>points:1:224:2235:224:2259:224:2291:224:2315|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink12" source="Decision.Yes" target="SetProcessVariableValue5.In"><geometry>points:1:289:1846:313:1846:344:1846:368:1846|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink13" source="SetProcessVariableValue6.Out" target="PerformRollback Update Variables2.In"><geometry>points:1:919:1846:945:1846:979:1847:1005:1847|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink14" source="Merge.Out" target="NeverReached.In"><geometry>points:1:1382:1849:1399:1849:1421:1849:1437:1849|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink15" source="SetProcessVariableValue5.Out" target="SetProcessVariableValue6.In"><geometry>points:1:590:1846:622:1846:665:1846:697:1846|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink16" source="PerformRollback Restore Variables.Out" target="AssertProcessVariableValue.In"><geometry>points:1:226:710:226:735:224:768:224:793|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink17" source="PerformRollback Update Variables.Out" target="AssertProcessVariableValue2.In"><geometry>points:1:223:1317:223:1344:224:1381:224:1408|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink18" source="PerformRollback Update Variables2.Out" target="Merge.In1"><geometry>points:1:1227:1847:1262:1847:1308:1849:1343:1849|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink2" source="SetProcessVariableValue.Out" target="SetProcessVariableValue2.In" transaction-control="commit-begin"><geometry>points:1:227:285:227:319:227:365:227:399|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink3" source="SetProcessVariableValue2.Out" target="PerformRollback Restore Variables.In"><geometry>points:1:227:505:227:535:226:574:226:604|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink4" source="AssertProcessVariableValue.Out" target="SetProcessVariableValue3.In" transaction-control="begin"><geometry>points:1:224:899:224:933:224:977:224:1011|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink5" source="SetProcessVariableValue3.Out" target="PerformRollback Update Variables.In"><geometry>points:1:224:1117:224:1145:223:1183:223:1211|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink6" source="AssertProcessVariableValue2.Out" target="SetProcessVariableValue4.In"><geometry>points:1:224:1514:224:1539:224:1571:224:1596|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink7" source="SetProcessVariableValue4.Out" target="Decision.In" transaction-control="commit"><geometry>points:1:224:1724:224:1751:224:1787:224:1814|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink8" source="Decision.No" target="Decision2.In"><geometry>points:1:224:1900:224:1918:224:1941:224:1959|label:0:0|factors:0.3:0.3</geometry></control-link><control-link name="ControlLink9" source="Decision2.Yes" target="TestCaseEnd.In"><geometry>points:1:289:1991:306:1991:328:1991:345:1991|label:0:0|factors:0.3:0.3</geometry></control-link><process-variable name="Counter" display-name="Counter" type="Integer" scope="subprocess" persistent="true"/><process-variable name="TestVar" display-name="Test var" type="String" scope="subprocess" persistent="true"/></process>